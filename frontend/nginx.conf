# /nginx.conf

server {
  # 监听 80 端口
  listen 3000;

  # 设置静态文件的根目录
  root /usr/share/nginx/html;

  # 默认首页
  index index.html index.htm;

  # 路由处理核心配置
  location / {
    # 尝试按顺序查找文件：
    # 1. $uri: 查找与 URL 完全匹配的文件（例如 /static/js/main.js）
    # 2. $uri/: 查找与 URL 匹配的目录（例如 /assets/）
    # 3. /index.html: 如果上面都找不到，就返回 /index.html 文件
    # 这确保了所有未匹配到静态资源的请求都由 React 应用来处理
    try_files $uri $uri/ /index.html;
  }

  # （可选）为静态资源添加缓存头，优化性能
  location ~* \.(css|js|jpg|jpeg|png|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public";
  }
}